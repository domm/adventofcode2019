use 5.030;
use strict;
use warnings;
use lib '.';

my $maze = 
'### ### ############# ##### ####### ### 
#...#...#.............#.....#.......#...#
#.#.#.#.#########.###.#.###.#####.#.###.#
#.#...#.........#.#.....#.#.......#.....#
#.#############.#.#######.#############.#
#...........#.....#...#.....#.......#...#
#.#########.###.###.#.#.#.###.#####.#.## 
#.#.......#...#.#...#.#.#.....#...#...#.#
#.#.#####.###.###.###.#.#######.#.#####.#
#...#...#.#.#.......#.#.........#.#O....#
 ######.#.#.#########.###########.#####.#
#.......#.#.....#.....#.........#.#...#.#
#.#.###.#.#.###.#.#####.#####.#.#.#.#.#.#
#.#...#.#...#...#.#...#.....#.#.#...#.#.#
#.###.#.###.#####.#.#.#####.#.#.#####.#.#
#...#.#...#.#.....#.#...#...#.#.....#.#.#
 ##.#.###.#.#.#####.#####.###.#.#####.#.#
#.#.#.#...#.#.....#.......#.#.#.#.....#.#
#.#.#.#####.#####.#######.#.#.###.#####.#
#.#.#.....#.#...#...#...#...#...#.#.....#
#.#.#####.#.#.#####.#.#.#.#####.#.#.###.#
#...#...#...#.....#.#.#.#.#...#...#...#.#
#.###.#.#####.#.#.#.###.###.#.#.## ##.#.#
#.#...#...#...#.#.#...#.....#.#...#...#.#
#.#####.#.#####.###.#.#######.###.#.###.#
#.#.....#.....#.#...#.#.....#...#...#...#
#.#.#########.#.#.#####.###.###.###.#### 
#...#.......#.#.#.....#.#.....#.#...#...#
 ####.#.#####.#.#####.#.#.###.#.#####.#.#
#.#...#.....#.......#...#...#.#.......#.#
#.#.#######.#######.#######.## ########.#
#.#.....#.#.......#.#.....#...#.........#
#.#####.#.#######.#.#####.###.#.######## 
#.#...#.....#...#.#.#...#...#...#.......#
#.#.#.#####.#.#.#.#.#.#.###.#########.#.#
#...#.....#...#.#.#.#.#...........#...#.#
#.###.#########.#.#.#.###########.#.###.#
#...#.........#.#...#.#.....#.....#.#.#.#
 ##.#####.#####.#####.#.###.#.#####.#.#.#
#.......#.............#...#.........#...#
 ####### ############# ### ######### ### ';
my $w = 41;

#$maze = 
#'##____
##..##_
##.#..#
##.O.#_
#_###__';
#$w=6;

my $min=0;
my $clear_string = `clear`;
print $clear_string;

while ($maze =~ /\./) {
    while ($maze=~/O\./) { $maze=~s/O\./Oo/g }
    while ($maze=~/\.O/) { $maze=~s/\.O/oO/g }
    while ($maze =~ /O.{$w}\./s) { $maze=~s/O(.{$w})\./O$1o/sg; }
    while ($maze =~ /\..{$w}O/s) { $maze=~s/\.(.{$w})O/o$1O/sg; }
    $maze=~s/o/O/g;
    $min++;
    print $clear_string;
    say $maze;
    say "\n";
    say "after $min min";
    select(undef,undef,undef,0.01);
}
say $min;

